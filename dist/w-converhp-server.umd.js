/*!
 * w-converhp-server v2.0.28
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("path"),require("fs"),require("stream"),require("@hapi/hapi"),require("@hapi/inert"),require("crypto"),require("worker_threads")):"function"==typeof define&&define.amd?define(["path","fs","stream","@hapi/hapi","@hapi/inert","crypto","worker_threads"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["w-converhp-server"]=t(e.path,e.fs,e.stream,e["@hapi/hapi"],e["@hapi/inert"],e.crypto,e.require$$0)}(this,(function(e,t,n,r,o,i,c){"use strict";var l=Array.isArray,a="object"==typeof global&&global&&global.Object===Object&&global,u="object"==typeof self&&self&&self.Object===Object&&self,s=a||u||Function("return this")(),d=s.Symbol,g=Object.prototype,I=g.hasOwnProperty,p=g.toString,C=d?d.toStringTag:void 0;var f=Object.prototype.toString;var y="[object Null]",h="[object Undefined]",m=d?d.toStringTag:void 0;function b(e){return null==e?void 0===e?h:y:m&&m in Object(e)?function(e){var t=I.call(e,C),n=e[C];try{e[C]=void 0;var r=!0}catch(e){}var o=p.call(e);return r&&(t?e[C]=n:delete e[C]),o}(e):function(e){return f.call(e)}(e)}function A(e){return null!=e&&"object"==typeof e}var v="[object Symbol]";function Z(e){return"symbol"==typeof e||A(e)&&b(e)==v}var X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/;function G(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var W="[object AsyncFunction]",H="[object Function]",V="[object GeneratorFunction]",w="[object Proxy]";function J(e){if(!G(e))return!1;var t=b(e);return t==H||t==V||t==W||t==w}var Y,j=s["__core-js_shared__"],S=(Y=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"";var x=Function.prototype.toString;var B=/^\[object .+?Constructor\]$/,R=Function.prototype,T=Object.prototype,Q=R.toString,k=T.hasOwnProperty,P=RegExp("^"+Q.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(e){return!(!G(e)||(t=e,S&&S in t))&&(J(e)?P:B).test(function(e){if(null!=e){try{return x.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function L(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}var F=L(Object,"create");var O=Object.prototype.hasOwnProperty;var U=Object.prototype.hasOwnProperty;function z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!=n&&r!=r)return o;return-1}z.prototype.clear=function(){this.__data__=F?F(null):{},this.size=0},z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},z.prototype.get=function(e){var t=this.__data__;if(F){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return O.call(t,e)?t[e]:void 0},z.prototype.has=function(e){var t=this.__data__;return F?void 0!==t[e]:U.call(t,e)},z.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=F&&void 0===t?"__lodash_hash_undefined__":t,this};var M=Array.prototype.splice;function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}E.prototype.clear=function(){this.__data__=[],this.size=0},E.prototype.delete=function(e){var t=this.__data__,n=_(t,e);return!(n<0)&&(n==t.length-1?t.pop():M.call(t,n,1),--this.size,!0)},E.prototype.get=function(e){var t=this.__data__,n=_(t,e);return n<0?void 0:t[n][1]},E.prototype.has=function(e){return _(this.__data__,e)>-1},E.prototype.set=function(e,t){var n=this.__data__,r=_(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var D=L(s,"Map");function q(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(D||E),string:new z}},$.prototype.delete=function(e){var t=q(this,e).delete(e);return this.size-=t?1:0,t},$.prototype.get=function(e){return q(this,e).get(e)},$.prototype.has=function(e){return q(this,e).has(e)},$.prototype.set=function(e,t){var n=q(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ee="Expected a function";function te(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ee);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var c=e.apply(this,r);return n.cache=i.set(o,c)||i,c};return n.cache=new(te.Cache||$),n}te.Cache=$;var ne,re,oe,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ce=/\\(\\)?/g,le=(ne=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,r,o){t.push(r?o.replace(ce,"$1"):n||e)})),t},re=te(ne,(function(e){return 500===oe.size&&oe.clear(),e})),oe=re.cache,re),ae=le;var ue=1/0,se=d?d.prototype:void 0,de=se?se.toString:void 0;function ge(e){if("string"==typeof e)return e;if(l(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,ge)+"";if(Z(e))return de?de.call(e):"";var t=e+"";return"0"==t&&1/e==-ue?"-0":t}function Ie(e){return null==e?"":ge(e)}function pe(e,t){return l(e)?e:function(e,t){if(l(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Z(e))||K.test(e)||!X.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:ae(Ie(e))}var Ce=1/0;function fe(e){if("string"==typeof e||Z(e))return e;var t=e+"";return"0"==t&&1/e==-Ce?"-0":t}function ye(e,t,n){var r=null==e?void 0:function(e,t){for(var n=0,r=(t=pe(t,e)).length;null!=e&&n<r;)e=e[fe(t[n++])];return n&&n==r?e:void 0}(e,t);return void 0===r?n:r}var he="[object Number]";function me(e){return"number"==typeof e||A(e)&&b(e)==he}function be(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}var Ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ve={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new o(r,i||e,c),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,c=new Array(i);o<i;o++)c[o]=r[o].fn;return c},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,c){var l=n?n+e:e;if(!this._events[l])return!1;var a,u,s=this._events[l],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,o),!0;case 5:return s.fn.call(s.context,t,r,o,i),!0;case 6:return s.fn.call(s.context,t,r,o,i,c),!0}for(u=1,a=new Array(d-1);u<d;u++)a[u-1]=arguments[u];s.fn.apply(s.context,a)}else{var g,I=s.length;for(u=0;u<I;u++)switch(s[u].once&&this.removeListener(e,s[u].fn,void 0,!0),d){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,t);break;case 3:s[u].fn.call(s[u].context,t,r);break;case 4:s[u].fn.call(s[u].context,t,r,o);break;default:if(!a)for(g=1,a=new Array(d-1);g<d;g++)a[g-1]=arguments[g];s[u].fn.apply(s[u].context,a)}}return!0},l.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var l=this._events[i];if(l.fn)l.fn!==t||o&&!l.once||r&&l.context!==r||c(this,i);else{for(var a=0,u=[],s=l.length;a<s;a++)(l[a].fn!==t||o&&!l[a].once||r&&l[a].context!==r)&&u.push(l[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}({get exports(){return ve},set exports(e){ve=e}});var Ze=ve;function Xe(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ke(e){if(Xe(e)){for(let t in e)return!0;return!1}return!1}function Ge(e){return"[object String]"===Object.prototype.toString.call(e)}function We(e){return!(!Ge(e)||""===e)}var He=/\s/;var Ve=/^\s+/;function we(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&He.test(e.charAt(t)););return t}(e)+1).replace(Ve,""):e}var Je=NaN,Ye=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,Se=/^0o[0-7]+$/i,xe=parseInt;function Be(e){if("number"==typeof e)return e;if(Z(e))return Je;if(G(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=G(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=we(e);var n=je.test(e);return n||Se.test(e)?xe(e.slice(2),n?2:8):Ye.test(e)?Je:+e}var Re=1/0,Te=17976931348623157e292;function Qe(e){return e?(e=Be(e))===Re||e===-Re?(e<0?-1:1)*Te:e==e?e:0:0===e?e:0}function ke(e){var t=Qe(e),n=t%1;return t==t?n?t-n:t:0}function Pe(e){return e!=e}function Ne(e){let t=!1;if(We(e))t=!isNaN(Number(e));else if(function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)){if(Pe(e))return!1;t=!0}return t}function Le(e){if(!Ne(e))return 0;return Qe(e)}function Fe(e){return!!Ne(e)&&(e=Le(e),"number"==typeof(t=e)&&t==ke(t));var t}var Oe=s.isFinite,Ue=Math.min;var ze=function(e){var t=Math[e];return function(e,n){if(e=Be(e),(n=null==n?0:Ue(ke(n),292))&&Oe(e)){var r=(Ie(e)+"e").split("e");return+((r=(Ie(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("round"),_e=ze;function Me(e){if(!Ne(e))return 0;e=Le(e);let t=_e(e);return"0"===String(t)?0:t}function Ee(e){if(!Fe(e))return!1;return Me(e)>=0}function De(e){return"[object Array]"===Object.prototype.toString.call(e)}function qe(e){if(Xe(e)){for(let t in e)return!1;return!0}return!1}function $e(e){return!!function(e){return"[object Undefined]"===Object.prototype.toString.call(e)}(e)||(!!function(e){return"[object Null]"===Object.prototype.toString.call(e)}(e)||(!!qe(e)||(!!function(e){return!(!Ge(e)||""!==e)}(e)||(!!function(e){return!!De(e)&&0===e.length}(e)||!!Pe(e)))))}function et(e){return!!De(e)&&(0!==e.length&&(1!==e.length||!$e(e[0])))}var tt="[object Boolean]";function nt(e){return!0===(t=e)||!1===t||A(t)&&b(t)==tt;var t}function rt(e){let t,n=Object.prototype.toString.call(e);if(t="[object Promise]"===n,t)return!0;if("[object Function]"!==n)return!1;try{t="function"!=typeof e.subscribe&&"function"==typeof e.then}catch(e){}return t}function ot(e){if(!We(e)&&!Ne(e)&&!Z(e))return"";let t="";try{t=String(e)}catch(e){}try{t=e.toString()}catch(e){}return t}var it={};var ct,lt={},at={get exports(){return lt},set exports(e){lt=e}};function ut(){return ct||(ct=1,function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==Ae&&Ae.crypto&&(n=Ae.crypto),!n)try{n=require("crypto")}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},c=i.lib={},l=c.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=c.WordArray=l.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var c=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=c<<24-(r+i)%4*8}else for(var l=0;l<o;l+=4)t[r+l>>>2]=n[l>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new a.init(t,e)}}),u=i.enc={},s=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},g=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},I=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=g.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,c=this.blockSize,l=i/(4*c),u=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*c,s=e.min(4*u,i);if(u){for(var d=0;d<u;d+=c)this._doProcessBlock(o,d);n=o.splice(0,u),r.sigBytes-=s}return new a.init(n,s)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});c.Hasher=I.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){I.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=i.algo={};return i}(Math),n)}(at)),lt}!function(e,t){e.exports=ut().enc.Utf8}({get exports(){return it},set exports(e){it=e}});var st=it,dt={};!function(e,t){var n;e.exports=(n=ut(),function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var o=[],i=0,c=0;c<n;c++)if(c%4){var l=r[e.charCodeAt(c-1)]<<c%4*2|r[e.charCodeAt(c)]>>>6-c%4*2;o[i>>>2]|=l<<24-i%4*8,i++}return t.create(o,i)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var c=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,l=0;l<4&&i+.75*l<n;l++)o.push(r.charAt(c>>>6*(3-l)&63));var a=r.charAt(64);if(a)for(;o.length%4;)o.push(a);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var c=n.charAt(64);if(c){var l=e.indexOf(c);-1!==l&&(t=l)}return r(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}({get exports(){return dt},set exports(e){dt=e}});var gt=dt;function It(e){if(!We(e))return"";let t=st.parse(e);return gt.stringify(t)}function pt(e,t){return!!Xe(e)&&(!(!We(t)&&!Ne(t))&&t in e)}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var ft,yt=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),c=i.length;c--;){var l=i[ft?c:++r];if(!1===t(o[l],l,o))break}return e};function ht(e){return A(e)&&"[object Arguments]"==b(e)}var mt=Object.prototype,bt=mt.hasOwnProperty,At=mt.propertyIsEnumerable,vt=ht(function(){return arguments}())?ht:function(e){return A(e)&&bt.call(e,"callee")&&!At.call(e,"callee")},Zt=vt;var Xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Kt=Xt&&"object"==typeof module&&module&&!module.nodeType&&module,Gt=Kt&&Kt.exports===Xt?s.Buffer:void 0,Wt=(Gt?Gt.isBuffer:void 0)||function(){return!1},Ht=9007199254740991,Vt=/^(?:0|[1-9]\d*)$/;function wt(e,t){var n=typeof e;return!!(t=null==t?Ht:t)&&("number"==n||"symbol"!=n&&Vt.test(e))&&e>-1&&e%1==0&&e<t}var Jt=9007199254740991;function Yt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Jt}var jt={};jt["[object Float32Array]"]=jt["[object Float64Array]"]=jt["[object Int8Array]"]=jt["[object Int16Array]"]=jt["[object Int32Array]"]=jt["[object Uint8Array]"]=jt["[object Uint8ClampedArray]"]=jt["[object Uint16Array]"]=jt["[object Uint32Array]"]=!0,jt["[object Arguments]"]=jt["[object Array]"]=jt["[object ArrayBuffer]"]=jt["[object Boolean]"]=jt["[object DataView]"]=jt["[object Date]"]=jt["[object Error]"]=jt["[object Function]"]=jt["[object Map]"]=jt["[object Number]"]=jt["[object Object]"]=jt["[object RegExp]"]=jt["[object Set]"]=jt["[object String]"]=jt["[object WeakMap]"]=!1;var St="object"==typeof exports&&exports&&!exports.nodeType&&exports,xt=St&&"object"==typeof module&&module&&!module.nodeType&&module,Bt=xt&&xt.exports===St&&a.process,Rt=function(){try{var e=xt&&xt.require&&xt.require("util").types;return e||Bt&&Bt.binding&&Bt.binding("util")}catch(e){}}(),Tt=Rt&&Rt.isTypedArray,Qt=Tt?function(e){return function(t){return e(t)}}(Tt):function(e){return A(e)&&Yt(e.length)&&!!jt[b(e)]},kt=Qt,Pt=Object.prototype.hasOwnProperty;function Nt(e,t){var n=l(e),r=!n&&Zt(e),o=!n&&!r&&Wt(e),i=!n&&!r&&!o&&kt(e),c=n||r||o||i,a=c?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var s in e)!t&&!Pt.call(e,s)||c&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||wt(s,u))||a.push(s);return a}var Lt=Object.prototype;function Ft(e,t){return function(n){return e(t(n))}}var Ot=Ft(Object.keys,Object),Ut=Object.prototype.hasOwnProperty;function zt(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||Lt))return Ot(e);var t,n,r=[];for(var o in Object(e))Ut.call(e,o)&&"constructor"!=o&&r.push(o);return r}function _t(e){return null!=e&&Yt(e.length)&&!J(e)}function Mt(e){return _t(e)?Nt(e):zt(e)}var Et=function(e,t){return function(n,r){if(null==n)return n;if(!_t(n))return e(n,r);for(var o=n.length,i=t?o:-1,c=Object(n);(t?i--:++i<o)&&!1!==r(c[i],i,c););return n}}((function(e,t){return e&&yt(e,t,Mt)})),Dt=Et;function qt(e){return e}function $t(e,t){var n;return(l(e)?Ct:Dt)(e,"function"==typeof(n=t)?n:qt)}function en(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function tn(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function nn(e){return"[object Uint16Array]"===Object.prototype.toString.call(e)}function rn(e){if(!(en(e)||(t=e,"[object Blob]"===Object.prototype.toString.call(t))||tn(e)||nn(e)))return null;var t;try{if(e.byteLength)return e.byteLength}catch(e){}try{if(e.length)return e.length}catch(e){}try{if(e.size)return e.size}catch(e){}return null}var on=Ft(Object.getPrototypeOf,Object),cn="[object Object]",ln=Function.prototype,an=Object.prototype,un=ln.toString,sn=an.hasOwnProperty,dn=un.call(Object);var gn="[object DOMException]",In="[object Error]";function pn(e){if(!A(e))return!1;var t=b(e);return t==In||t==gn||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!A(e)||b(e)!=cn)return!1;var t=on(e);if(null===t)return!0;var n=sn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&un.call(n)==dn}(e)}function Cn(e){if(!We(e))return new Uint8Array;let t;try{t=function(e){if(!Ge(e))return new Uint8Array;let t=gt.parse(e),n=t.words,r=t.sigBytes,o=new Uint8Array(r);for(let e=0;e<r;e++){let t=n[e>>>2]>>>24-e%4*8&255;o[e]=t}return o}(It(e))}catch(e){return new Uint8Array}return t}function fn(e,t){return function(e,t,n,r,o,i){if(!Ne(e))return null;if(!tn(t))return null;if(!Fe(n))return null;if(!nt(r))return null;if(!Fe(o))return null;if(!Fe(i))return null;let c,l,a;e=Le(e);let u=8*i-o-1,s=(1<<u)-1,d=s>>1,g=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,I=r?i-1:0,p=r?-1:1,C=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,c=s):(c=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-c))<1&&(c--,a*=2),(e+=c+d>=1?g/a:g*Math.pow(2,1-d))*a>=2&&(c++,a/=2),c+d>=s?(l=0,c=s):c+d>=1?(l=(e*a-1)*Math.pow(2,o),c+=d):(l=e*Math.pow(2,d-1)*Math.pow(2,o),c=0));o>=8;t[n+I]=255&l,I+=p,l/=256,o-=8);for(c=c<<o|l,u+=o;u>0;t[n+I]=255&c,I+=p,c/=256,u-=8);return t[n+I-p]|=128*C,null}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:52,arguments.length>5&&void 0!==arguments[5]?arguments[5]:8)}function yn(e){let t=[],n=[];if(!et(e)&&!Ke(e))return null;let r=[],o=[];function i(e){r.push(rn(e)),o.push(e)}try{let c=function(e){if(!Xe(e))return{results:"",binarys:[]};if(qe(e))return{results:"",binarys:[]};let t="",n=[];try{let r=-1;t=JSON.stringify(e,(function(e,t){if(tn(t)){r+=1;let e=`[Uint8Array]::${r}`;return n.push(t),e}if(nn(t)){r+=1;let e=`[Uint16Array]::${r}`;return n.push(t),e}if(en(t)){r+=1;let e=`[ArrayBuffer]::${r}`;return n.push(t),e}return pn(t)&&(t=t.toString()),t}))}catch(e){}return{results:t,binarys:n}}(e);i(Cn(c.results)),$t(c.binarys,(e=>{i(e)}));let l=r,a=Cn(JSON.stringify(l)),u=new Uint8Array(8);fn(rn(a),u),t.push(u),t.push(a),$t(o,(e=>{t.push(e)})),$t(t,(e=>{n=function(e,t){let n=rn(e),r=rn(t),o=new Uint8Array(n+r);return o.set(new Uint8Array(e),0),o.set(new Uint8Array(t),n),o}(n,e)}))}catch(e){return null}return n}function hn(e){return function(e,t,n,r,o){if(!tn(e))return null;if(!Fe(t))return null;if(!nt(n))return null;if(!Fe(r))return null;if(!Fe(o))return null;let i,c,l=8*o-r-1,a=(1<<l)-1,u=a>>1,s=-7,d=n?0:o-1,g=n?1:-1,I=e[t+d];for(d+=g,i=I&(1<<-s)-1,I>>=-s,s+=l;s>0;i=256*i+e[t+d],d+=g,s-=8);for(c=i&(1<<-s)-1,i>>=-s,s+=r;s>0;c=256*c+e[t+d],d+=g,s-=8);if(0===i)i=1-u;else{if(i===a)return c?NaN:1/0*(I?-1:1);c+=Math.pow(2,r),i-=u}return(I?-1:1)*c*Math.pow(2,i-r)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:52,arguments.length>4&&void 0!==arguments[4]?arguments[4]:8)}var mn={};!function(e,t){var n;e.exports=(n=ut(),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;t.call(this,r,n)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)}({get exports(){return mn},set exports(e){mn=e}});var bn=mn;function An(e){if(!tn(e))return"";let t;try{n=function(e){return tn(e)?bn.create(e).toString(gt):""}(e),t=We(n)?gt.parse(n).toString(st):""}catch(e){return""}var n;return t}function vn(e){let t=null;if(!tn(e))return null;try{let n=8,r=e.slice(0,n),o=e.slice(n,rn(e)),i=hn(r),c=o.slice(0,i),l=o.slice(i,rn(o)),a=An(c),u=function(e,t){let n=0,r=0,o=[];return $t(t,(t=>{r=n+t;let i=e.slice(n,r);n=r,o.push(i)})),o}(l,JSON.parse(a));t=function(e){if(!Ke(e))return{};let{results:t,binarys:n}=e;if(!We(t))return{};if(!De(n))return{};let r={};try{r=JSON.parse(t,(function(e,t){if(We(t)){if(t.indexOf("[Uint8Array]::")>=0){let e=Me(t.replace("[Uint8Array]::",""));return n[e]}if(t.indexOf("[Uint16Array]::")>=0){let e=Me(t.replace("[Uint16Array]::",""));return n[e]}if(t.indexOf("[ArrayBuffer]::")>=0){let e=Me(t.replace("[ArrayBuffer]::",""));return n[e]}}return t}))}catch(e){}return r}({results:An(u.shift()),binarys:u})}catch(e){}return t}function Zn(e){return!!t.existsSync(e)&&(!t.lstatSync(e).isDirectory()&&!t.lstatSync(e).isSymbolicLink())}function Xn(e){return!!t.existsSync(e)&&(!t.lstatSync(e).isFile()&&!t.lstatSync(e).isSymbolicLink())}function Kn(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ye(n,"type","");We(r)||(r="sha512");let o=ye(n,"useSync","");nt(o)||(o=!0);let c="";return c=o?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sha512";if(!Zn(e))throw new Error(`fp[${e}] is not a file`);let r=t.readFileSync(e),o=i.createHash(n);return o.update(r,"utf8"),o.digest("hex")}(e,r):function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sha512",r=be();Zn(e)||r.reject(`fp[${e}] is not a file`);try{let o=i.createHash(n),c=t.createReadStream(e);c.on("readable",(()=>{let e=c.read();e?o.update(e):r.resolve(o.digest("hex"))})),c.on("error",(e=>{r.reject(e.toString())}))}catch(e){r.reject(e.toString())}return r}(e,r),c}var Gn={};!function(e,t){e.exports=function(e){var t={};!function(t,n){t.exports=function(e){var t={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new o(r,i||e,c),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,c=new Array(i);o<i;o++)c[o]=r[o].fn;return c},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,c){var l=n?n+e:e;if(!this._events[l])return!1;var a,u,s=this._events[l],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,o),!0;case 5:return s.fn.call(s.context,t,r,o,i),!0;case 6:return s.fn.call(s.context,t,r,o,i,c),!0}for(u=1,a=new Array(d-1);u<d;u++)a[u-1]=arguments[u];s.fn.apply(s.context,a)}else{var g,I=s.length;for(u=0;u<I;u++)switch(s[u].once&&this.removeListener(e,s[u].fn,void 0,!0),d){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,t);break;case 3:s[u].fn.call(s[u].context,t,r);break;case 4:s[u].fn.call(s[u].context,t,r,o);break;default:if(!a)for(g=1,a=new Array(d-1);g<d;g++)a[g-1]=arguments[g];s[u].fn.apply(s[u].context,a)}}return!0},l.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var l=this._events[i];if(l.fn)l.fn!==t||o&&!l.once||r&&l.context!==r||c(this,i);else{for(var a=0,u=[],s=l.length;a<s;a++)(l[a].fn!==t||o&&!l[a].once||r&&l[a].context!==r)&&u.push(l[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}({get exports(){return t},set exports(e){t=e}});var n=t;let r;!function(){if("nodejs"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let t=(o="CgogICAgICAgIC8vaW1wb3J0IHsgcGFyZW50UG9ydCB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJwogICAgICAgIGxldCB7IHBhcmVudFBvcnQgfSA9IHJlcXVpcmUoJ3dvcmtlcl90aHJlYWRzJykgLy/lm6BwYWNrYWdlLmpzb27kuI3ntaZ0eXBlPW1vZHVsZeaVheeEoeazleaUr+aPtGVzNiBpbXBvcnQsIOW+l+S9v+eUqHJlcXVpcmUKICAgICAgICAvL+iLpeimgeaWvG5vZGVqcyB3b3JrZXLlhafkvb/nlKjnhKHms5Xnt6jora/nmoTljp/nlJ/lpZfku7bkvovlpoJmcywg6YG/5YWN5L2/55So6aCC5bGkaW1wb3J05Yqg6LyJ5L2/55SoLCDlm6DnhKHms5Xnt6jora/mnIPnm7TmjqXkv53nlZkKICAgICAgICAvL+S4puWboGltcG9ydOS9jeaWvHdvcmtlcuWkluWxpOmZkOWumueCunJlcXVpcmXljYAocGFja2FnZS5qc29u5LiN57WmdHlwZT1tb2R1bGUpLCDmlYXlh7rnj77pjK/oqqTnhKHms5Xnt6jora8KICAgICAgICAKCiJ1c2Ugc3RyaWN0Ijt2YXIgdD1yZXF1aXJlKCJwYXRoIikscj1yZXF1aXJlKCJmcyIpO2Z1bmN0aW9uIGUoKXtsZXQgdCxyLGU9bmV3IFByb21pc2UoKGZ1bmN0aW9uKCl7dD1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV19KSk7cmV0dXJuIGUucmVzb2x2ZT10LGUucmVqZWN0PXIsZX1mdW5jdGlvbiBuKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9ZnVuY3Rpb24gaSh0KXtpZihmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBPYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCkpe2ZvcihsZXQgciBpbiB0KXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIG8odCl7cmV0dXJuIltvYmplY3QgU3RyaW5nXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdCE9dH1mdW5jdGlvbiBjKHQpe3JldHVybiEhZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgVW5kZWZpbmVkXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBOdWxsXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwoISFpKHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4hKCFvKHQpfHwiIiE9PXQpfSh0KXx8KCEhZnVuY3Rpb24odCl7cmV0dXJuISFuKHQpJiYwPT09dC5sZW5ndGh9KHQpfHwhIXUodCkpKSkpfWZ1bmN0aW9uIGYodCl7cmV0dXJuISghbyh0KXx8IiI9PT10KX12YXIgbD0vXHMvO3ZhciBhPS9eXHMrLztmdW5jdGlvbiBzKHQpe3JldHVybiB0P3Quc2xpY2UoMCxmdW5jdGlvbih0KXtmb3IodmFyIHI9dC5sZW5ndGg7ci0tJiZsLnRlc3QodC5jaGFyQXQocikpOyk7cmV0dXJuIHJ9KHQpKzEpLnJlcGxhY2UoYSwiIik6dH1mdW5jdGlvbiBwKHQpe3ZhciByPXR5cGVvZiB0O3JldHVybiBudWxsIT10JiYoIm9iamVjdCI9PXJ8fCJmdW5jdGlvbiI9PXIpfXZhciB5PSJvYmplY3QiPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJmdsb2JhbC5PYmplY3Q9PT1PYmplY3QmJmdsb2JhbCxiPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsaD15fHxifHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpLHY9aC5TeW1ib2wsZz1PYmplY3QucHJvdG90eXBlLGo9Zy5oYXNPd25Qcm9wZXJ0eSxTPWcudG9TdHJpbmcsZD12P3YudG9TdHJpbmdUYWc6dm9pZCAwO3ZhciBtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIE89IltvYmplY3QgTnVsbF0iLHg9IltvYmplY3QgVW5kZWZpbmVkXSIsUj12P3YudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIHcodCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwPT09dD94Ok86UiYmUiBpbiBPYmplY3QodCk/ZnVuY3Rpb24odCl7dmFyIHI9ai5jYWxsKHQsZCksZT10W2RdO3RyeXt0W2RdPXZvaWQgMDt2YXIgbj0hMH1jYXRjaCh0KXt9dmFyIGk9Uy5jYWxsKHQpO3JldHVybiBuJiYocj90W2RdPWU6ZGVsZXRlIHRbZF0pLGl9KHQpOmZ1bmN0aW9uKHQpe3JldHVybiBtLmNhbGwodCl9KHQpfXZhciBOPSJbb2JqZWN0IFN5bWJvbF0iO2Z1bmN0aW9uICQodCl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiB0fHxmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmIm9iamVjdCI9PXR5cGVvZiB0fSh0KSYmdyh0KT09Tn12YXIgQT1OYU4saz0vXlstK10weFswLTlhLWZdKyQvaSxGPS9eMGJbMDFdKyQvaSxJPS9eMG9bMC03XSskL2kscT1wYXJzZUludDtmdW5jdGlvbiBFKHQpe2lmKCJudW1iZXIiPT10eXBlb2YgdClyZXR1cm4gdDtpZigkKHQpKXJldHVybiBBO2lmKHAodCkpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0LnZhbHVlT2Y/dC52YWx1ZU9mKCk6dDt0PXAocik/cisiIjpyfWlmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gMD09PXQ/dDordDt0PXModCk7dmFyIGU9Ri50ZXN0KHQpO3JldHVybiBlfHxJLnRlc3QodCk/cSh0LnNsaWNlKDIpLGU/Mjo4KTprLnRlc3QodCk/QTordH12YXIgTD0xLzAsTT0xNzk3NjkzMTM0ODYyMzE1N2UyOTI7ZnVuY3Rpb24gUCh0KXtyZXR1cm4gdD8odD1FKHQpKT09PUx8fHQ9PT0tTD8odDwwPy0xOjEpKk06dD09dD90OjA6MD09PXQ/dDowfWZ1bmN0aW9uIFQodCl7dmFyIHI9UCh0KSxlPXIlMTtyZXR1cm4gcj09cj9lP3ItZTpyOjB9ZnVuY3Rpb24gVSh0KXtsZXQgcj0hMTtpZihmKHQpKXI9IWlzTmFOKE51bWJlcih0KSk7ZWxzZSBpZihmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBOdW1iZXJdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCkpe2lmKHUodCkpcmV0dXJuITE7cj0hMH1yZXR1cm4gcn1mdW5jdGlvbiBEKHQpe2lmKCFVKHQpKXJldHVybiAwO3JldHVybiBQKHQpfWZ1bmN0aW9uIFcodCl7cmV0dXJuISFVKHQpJiYodD1EKHQpLCJudW1iZXIiPT10eXBlb2Yocj10KSYmcj09VChyKSk7dmFyIHJ9dmFyIF89QXJyYXkuaXNBcnJheSx6PTEvMCxCPXY/di5wcm90b3R5cGU6dm9pZCAwLEM9Qj9CLnRvU3RyaW5nOnZvaWQgMDtmdW5jdGlvbiBHKHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gdDtpZihfKHQpKXJldHVybiBmdW5jdGlvbih0LHIpe2Zvcih2YXIgZT0tMSxuPW51bGw9PXQ/MDp0Lmxlbmd0aCxpPUFycmF5KG4pOysrZTxuOylpW2VdPXIodFtlXSxlLHQpO3JldHVybiBpfSh0LEcpKyIiO2lmKCQodCkpcmV0dXJuIEM/Qy5jYWxsKHQpOiIiO3ZhciByPXQrIiI7cmV0dXJuIjAiPT1yJiYxL3Q9PS16PyItMCI6cn1mdW5jdGlvbiBIKHQpe3JldHVybiBudWxsPT10PyIiOkcodCl9dmFyIEo9aC5pc0Zpbml0ZSxLPU1hdGgubWluO3ZhciBRLFY9KFE9TWF0aFsicm91bmQiXSxmdW5jdGlvbih0LHIpe2lmKHQ9RSh0KSwocj1udWxsPT1yPzA6SyhUKHIpLDI5MikpJiZKKHQpKXt2YXIgZT0oSCh0KSsiZSIpLnNwbGl0KCJlIik7cmV0dXJuKygoZT0oSChRKGVbMF0rImUiKygrZVsxXStyKSkpKyJlIikuc3BsaXQoImUiKSlbMF0rImUiKygrZVsxXS1yKSl9cmV0dXJuIFEodCl9KTtmdW5jdGlvbiBYKHQpe2lmKCFVKHQpKXJldHVybiAwO3Q9RCh0KTtsZXQgcj1WKHQpO3JldHVybiIwIj09PVN0cmluZyhyKT8wOnJ9ZnVuY3Rpb24gWSh0KXtpZighVyh0KSlyZXR1cm4hMTtyZXR1cm4gWCh0KT49MH1mdW5jdGlvbiBaKHQscil7aWYoIWYodCkpcmV0dXJuIiI7aWYoIVkocikpcmV0dXJuIiI7aWYoMD09PShyPVgocikpKXJldHVybiIiO2xldCBlPXQubGVuZ3RoLXI7cmV0dXJuIGU8MCYmKGU9MCksdC5zdWJzdHJpbmcoZSxlK3IpfWZ1bmN0aW9uIHR0KHQscil7cmV0dXJuIGYodCkmJlkocik/MD09PShyPVgocikpP3Q6ZnVuY3Rpb24odCxyKXtyZXR1cm4gZih0KSYmWShyKT8wPT09KHI9WChyKSk/IiI6dC5zdWJzdHJpbmcoMCxyKToiIn0odCx0Lmxlbmd0aC1yKToiIn1mdW5jdGlvbiBydCh0KXtpZighZih0KSlyZXR1cm57cGF0aDoiIixpc1Jvb3Q6ITF9O2Zvcig7dC5pbmRleE9mKCJcXFxcIik+PTA7KXQ9dC5yZXBsYWNlKCJcXFxcIiwiXFwiKTtmb3IoO3QuaW5kZXhPZigiLy8iKT49MDspdD10LnJlcGxhY2UoIi8vIiwiLyIpO2lmKCI6Ij09PVoodCwxKSlyZXR1cm57cGF0aDpgJHt0fVxcYCxpc1Jvb3Q6ITB9O2lmKCJcXCI9PT1aKHQsMSkpe2xldCByPXR0KHQsMSk7cmV0dXJuIjoiPT09WihyLDEpP3twYXRoOnQsaXNSb290OiEwfTp7cGF0aDpyLGlzUm9vdDohMX19aWYoIi8iPT09Wih0LDEpKXtsZXQgcj10dCh0LDEpO3JldHVybiAwPT09ci5sZW5ndGg/e3BhdGg6dCxpc1Jvb3Q6ITB9OntwYXRoOnIsaXNSb290OiExfX1yZXR1cm57cGF0aDp0LGlzUm9vdDohMX19ZnVuY3Rpb24gZXQodCl7aWYoIWYodCkpcmV0dXJuIiI7bGV0IHI9cnQodCk7aWYoci5pc1Jvb3QpcmV0dXJuIHIucGF0aDtsZXQgZT1mdW5jdGlvbih0KXtpZighZih0KSlyZXR1cm4iIjtsZXQgcj1ydCh0KTtpZihyLmlzUm9vdClyZXR1cm4gci5wYXRoO2xldCBlPXIucGF0aDt0cnl7ZT1lLnNwbGl0KCJcXCIpLnBvcCgpLnNwbGl0KCIvIikucG9wKCl9Y2F0Y2godCl7fXJldHVybiBlfSh0PXIucGF0aCk7aWYoIWYoZSkpcmV0dXJuIHQ7bGV0IG49cnQodD10dCh0LGUubGVuZ3RoKSk7cmV0dXJuIG4uaXNSb290LG4ucGF0aH1mdW5jdGlvbiBudCh0KXtyZXR1cm4hIXIuZXhpc3RzU3luYyh0KSYmKCFyLmxzdGF0U3luYyh0KS5pc0ZpbGUoKSYmIXIubHN0YXRTeW5jKHQpLmlzU3ltYm9saWNMaW5rKCkpfWZ1bmN0aW9uIGl0KHQpe3JldHVybiEhci5leGlzdHNTeW5jKHQpJiYoIXIubHN0YXRTeW5jKHQpLmlzRGlyZWN0b3J5KCkmJiFyLmxzdGF0U3luYyh0KS5pc1N5bWJvbGljTGluaygpKX1mdW5jdGlvbiBvdCh0KXtpZighci5leGlzdHNTeW5jKHQpKXJldHVybntzdWNjZXNzOiJmaWxlIGRvZXMgbm90IGV4aXN0OiAiK3R9O2lmKCFpdCh0KSlyZXR1cm57ZXJyb3I6ImlucHV0IHBhdGggaXMgbm90IGEgZmlsZTogIit0fTt0cnl7ci51bmxpbmtTeW5jKHQpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX1yZXR1cm57c3VjY2VzczoiZG9uZTogIit0fX1hc3luYyBmdW5jdGlvbiB1dCh0LGksbyl7bGV0IHU9IiI7aWYoIW4oZj1pKXx8MD09PWYubGVuZ3RofHwxPT09Zi5sZW5ndGgmJmMoZlswXSkpdGhyb3cgbmV3IEVycm9yKCJmcHNJbiBpbiBub3QgYW4gZWZmZWN0aXZlIGFycmF5Iik7dmFyIGY7bGV0IGw9ZXQobyk7bnQobCl8fGZ1bmN0aW9uKHQpe2lmKG50KHQpKXJldHVybntzdWNjZXNzOiJpbnB1dCBmb2xkZXIgaXMgYWxyZWFkeSBleGlzdHM6ICIrdH07aWYoci5leGlzdHNTeW5jKHQpKXJldHVybntlcnJvcjoiaW5wdXQgcGF0aCBhbHJlYWR5IGV4aXN0czogIit0fTt0cnl7ci5ta2RpclN5bmModCx7cmVjdXJzaXZlOiEwfSl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0obCk7bGV0IGE9ZSgpO3RyeXtsZXQgbj1yLmNyZWF0ZVdyaXRlU3RyZWFtKG8pO2ZvcihsZXQgdD0wO3Q8aS5sZW5ndGg7dCsrKXtsZXQgbz1pW3RdO2lmKCFpdChvKSl0aHJvdyBuZXcgRXJyb3IoYGZwSW5bJHtvfV0gaXMgbm90IGEgZmlsZWApO2xldCBjPSgpPT57bGV0IHQ9ZSgpLGk9ci5jcmVhdGVSZWFkU3RyZWFtKG8pO3JldHVybiBpLm9uKCJlcnJvciIsKHI9Pnt1PXIubWVzc2FnZSx0LnJlamVjdChyKX0pKSxpLm9uKCJlbmQiLCgoKT0+e290KG8pLHQucmVzb2x2ZSgpfSkpLGkucGlwZShuLHtlbmQ6ITF9KSx0fTthd2FpdCBjKCl9bi5lbmQoKSxuLm9uKCJlcnJvciIsKHQ9Pnt1PXQubWVzc2FnZSxhLnJlamVjdCh1KX0pKSxuLm9uKCJmaW5pc2giLCgoKT0+e2xldCByPXtmaWxlbmFtZTp0LHBhdGg6b307YS5yZXNvbHZlKHIpfSkpfWNhdGNoKHQpe3U9dC5tZXNzYWdlLGEucmVqZWN0KHUpfXJldHVybiBhfWxldCBtZXJnZUZpbGVzPWFzeW5jKHIsZSxuLGkpPT57bGV0IG89W107Zm9yKGxldCBpPTA7aTxuO2krKyl7bGV0IG49dC5qb2luKHIsYCR7ZX1fJHtpfWApO28ucHVzaChuKX1sZXQgdT10LmpvaW4ocixlKTtyZXR1cm4gYXdhaXQgdXQoaSxvLHUpfTsKCgpsZXQgaW5zdGFuY2UgPSBudWxsCmZ1bmN0aW9uIGluaXQoaW5wdXQpewoKICAgIC8vaW5pdAogICAgbGV0IHIKICAgIAogICAgICAgIHIgPSB7CiAgICAgICAgICAgIG1haW46IG1lcmdlRmlsZXMKICAgICAgICB9CiAgICAgICAgCgogICAgLy9vbgogICAgCgogICAgLy9zYXZlCiAgICBpbnN0YW5jZSA9IHIKCn0KCmZ1bmN0aW9uIHNlbmRNZXNzYWdlKGRhdGEpIHsKICAgIAogICAgICAgIHBhcmVudFBvcnQucG9zdE1lc3NhZ2UoZGF0YSkKICAgICAgICAKfQoKYXN5bmMgZnVuY3Rpb24gcnVuKGRhdGEpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpbm5lciB3b3JrZXIgcnVuJyxkYXRhKQoKICAgIC8vbW9kZQogICAgbGV0IG1vZGUgPSBkYXRhLm1vZGUKCiAgICAvL2NoZWNrCiAgICBpZihtb2RlICE9PSAnaW5pdCcgJiYgbW9kZSAhPT0gJ2NhbGwnKXsKICAgICAgICByZXR1cm4KICAgIH0KCiAgICAvL2luaXQKICAgIGlmKG1vZGUgPT09ICdpbml0Jyl7CiAgICAgICAgCiAgICAgICAgdHJ5ewoKICAgICAgICAgICAgLy90eXBlCiAgICAgICAgICAgIGxldCB0eXBlID0gZGF0YS50eXBlCgogICAgICAgICAgICAvL2lucHV0CiAgICAgICAgICAgIGxldCBpbnB1dCA9IGRhdGEuaW5wdXQKICAgIAogICAgICAgICAgICAvL2luc3RhbmNlCiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdmdW5jdGlvbicpewogICAgICAgICAgICAgICAgaW5pdCguLi5pbnB1dCkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gbWVyZ2VGaWxlcwogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBjYXRjaChlcnIpewogICAgICAgIAogICAgICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZW1pdCcsCiAgICAgICAgICAgICAgICBldk5hbWU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICBtc2c6IGVyciwKICAgICAgICAgICAgfQogICAgICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgICAgIH0KICAgICAgICAgICAgCiAgICB9CgogICAgLy9jaGVjawogICAgaWYobW9kZSA9PT0gJ2NhbGwnKXsKICAgICAgICBsZXQgc3RhdGUgPSAnJwogICAgICAgIGxldCBtc2cgPSBudWxsCgogICAgICAgIHRyeXsKCiAgICAgICAgICAgIC8vZnVuCiAgICAgICAgICAgIGxldCBmdW4gPSBpbnN0YW5jZVtkYXRhLmZ1bl0KCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAoKICAgICAgICAgICAgLy9leGVjCiAgICAgICAgICAgIGF3YWl0IGZ1biguLi5pbnB1dCkKICAgICAgICAgICAgICAgIC50aGVuKChzdWMpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nc3VjY2VzcycKICAgICAgICAgICAgICAgICAgICBtc2c9c3VjCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nZXJyb3InCiAgICAgICAgICAgICAgICAgICAgbXNnPWVycgogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgICAgIHN0YXRlID0gJ2Vycm9yJwogICAgICAgICAgICBtc2cgPSBlcnIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9zZW5kTWVzc2FnZQogICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgIG1vZGU6ICdyZXR1cm4nLAogICAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgICAgZnVuOiBkYXRhLmZ1biwKICAgICAgICAgICAgc3RhdGUsCiAgICAgICAgICAgIG1zZywKICAgICAgICB9CiAgICAgICAgc2VuZE1lc3NhZ2UocmVzKQoKICAgIH0KCn0KCmZ1bmN0aW9uIHJlY3ZNZXNzYWdlKGRhdGEpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpbm5lciB3b3JrZXIgcmVjdjonLCBkYXRhKQoKICAgIC8vZGF0YVJlY3YKICAgIGxldCBkYXRhUmVjdiA9IGRhdGEKCiAgICAvL3J1bgogICAgcnVuKGRhdGFSZWN2KQoKfQoKCiAgICAgICAgcGFyZW50UG9ydC5vbignbWVzc2FnZScsIHJlY3ZNZXNzYWdlKQogICAgICAgIAoKdHJ5ewogICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmhhbmRsZWRSZWplY3Rpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuY2F1Z2h0RXhjZXB0aW9uJywgZXJyKQogICAgfSkKICAgIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uTW9uaXRvcicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgZXJyKQogICAgfSkKfQpjYXRjaChlcnIpe30KCg==",Buffer.from(o,"base64").toString("utf8"));var o;function i(){let r=new n,o=function(t){try{return new e.Worker(t,{eval:!0})}catch(e){c(e)}}(t);if(!o)return c("invalid worker"),null;function i(){let e=function(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}(),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=n.length;for(let o=0;o<e;o++)t[o]=n[0|Math.random()*r];return t.join("")}(),n={mode:"call",id:t,fun:"main",input:[...arguments]};return o.postMessage(n),r.once(t,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function c(e){r.emit("error",e)}return o.on("message",(function(e){let t=e,n=t.mode;"emit"!==n&&"return"!==n||("emit"===n&&r.emit(t.evName,t.msg),"return"===n&&r.emit(t.id,t))})),o.on("error",c),o.on("exit",(e=>{1!==e&&c("exit code["+e+"] !== 1")})),function(){let e={mode:"init",type:"function",input:[...arguments]};o.postMessage(e)}([...arguments]),r.main=i,r.main=i,r.terminate=function(){o?(o.terminate(),o=void 0):c("worker has been terminated")},r}r=async function(){let e=[...arguments],t=i();return await t.main(...e).finally((()=>{t.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return r}(e)}({get exports(){return t},set exports(e){t=e}});var n=t,r={};!function(e,t){e.exports=function(){const e="function"==typeof Buffer,t="function"==typeof TextDecoder?new TextDecoder:void 0,n=(e=>{let t={};return e.forEach(((e,n)=>t[e]=n)),t})(("function"==typeof TextEncoder&&new TextEncoder,Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="))),r=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,o=String.fromCharCode.bind(String),i="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),c=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),l=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,a=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return o(55296+(t>>>10))+o(56320+(1023&t));case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},u=e=>e.replace(l,a),s=e=>{if(e=e.replace(/\s+/g,""),!r.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,i,c,l="";for(let r=0;r<e.length;)t=n[e.charAt(r++)]<<18|n[e.charAt(r++)]<<12|(i=n[e.charAt(r++)])<<6|(c=n[e.charAt(r++)]),l+=64===i?o(t>>16&255):64===c?o(t>>16&255,t>>8&255):o(t>>16&255,t>>8&255,255&t);return l},d="function"==typeof atob?e=>atob(c(e)):e?e=>Buffer.from(e,"base64").toString("binary"):s,g=e?e=>i(Buffer.from(e,"base64")):e=>i(d(e).split("").map((e=>e.charCodeAt(0)))),I=e?e=>Buffer.from(e,"base64").toString("utf8"):t?e=>t.decode(g(e)):e=>u(d(e)),p=e=>c(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),C=e=>I(p(e)),f=C;var y={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new o(r,i||e,c),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,c=new Array(i);o<i;o++)c[o]=r[o].fn;return c},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,c){var l=n?n+e:e;if(!this._events[l])return!1;var a,u,s=this._events[l],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,o),!0;case 5:return s.fn.call(s.context,t,r,o,i),!0;case 6:return s.fn.call(s.context,t,r,o,i,c),!0}for(u=1,a=new Array(d-1);u<d;u++)a[u-1]=arguments[u];s.fn.apply(s.context,a)}else{var g,I=s.length;for(u=0;u<I;u++)switch(s[u].once&&this.removeListener(e,s[u].fn,void 0,!0),d){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,t);break;case 3:s[u].fn.call(s[u].context,t,r);break;case 4:s[u].fn.call(s[u].context,t,r,o);break;default:if(!a)for(g=1,a=new Array(d-1);g<d;g++)a[g-1]=arguments[g];s[u].fn.apply(s[u].context,a)}}return!0},l.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var l=this._events[i];if(l.fn)l.fn!==t||o&&!l.once||r&&l.context!==r||c(this,i);else{for(var a=0,u=[],s=l.length;a<s;a++)(l[a].fn!==t||o&&!l[a].once||r&&l[a].context!==r)&&u.push(l[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}({get exports(){return y},set exports(e){y=e}});var h=y;let m;!function(){if("browser"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let e=f("CgoKInVzZSBzdHJpY3QiO3ZhciB0PXJlcXVpcmUoInBhdGgiKSxyPXJlcXVpcmUoImZzIik7ZnVuY3Rpb24gZSgpe2xldCB0LHIsZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oKXt0PWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXX0pKTtyZXR1cm4gZS5yZXNvbHZlPXQsZS5yZWplY3Q9cixlfWZ1bmN0aW9uIG4odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBpKHQpe2lmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7Zm9yKGxldCByIGluIHQpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gbyh0KXtyZXR1cm4iW29iamVjdCBTdHJpbmddIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiB1KHQpe3JldHVybiB0IT10fWZ1bmN0aW9uIGModCl7cmV0dXJuISFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBVbmRlZmluZWRdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCl8fCghIWZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bGxdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCl8fCghIWkodCl8fCghIWZ1bmN0aW9uKHQpe3JldHVybiEoIW8odCl8fCIiIT09dCl9KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4hIW4odCkmJjA9PT10Lmxlbmd0aH0odCl8fCEhdSh0KSkpKSl9ZnVuY3Rpb24gZih0KXtyZXR1cm4hKCFvKHQpfHwiIj09PXQpfXZhciBsPS9ccy87dmFyIGE9L15ccysvO2Z1bmN0aW9uIHModCl7cmV0dXJuIHQ/dC5zbGljZSgwLGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10Lmxlbmd0aDtyLS0mJmwudGVzdCh0LmNoYXJBdChyKSk7KTtyZXR1cm4gcn0odCkrMSkucmVwbGFjZShhLCIiKTp0fWZ1bmN0aW9uIHAodCl7dmFyIHI9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPXQmJigib2JqZWN0Ij09cnx8ImZ1bmN0aW9uIj09cil9dmFyIHk9Im9iamVjdCI9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmZ2xvYmFsLk9iamVjdD09PU9iamVjdCYmZ2xvYmFsLGI9Im9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixoPXl8fGJ8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksdj1oLlN5bWJvbCxnPU9iamVjdC5wcm90b3R5cGUsaj1nLmhhc093blByb3BlcnR5LFM9Zy50b1N0cmluZyxkPXY/di50b1N0cmluZ1RhZzp2b2lkIDA7dmFyIG09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzt2YXIgTz0iW29iamVjdCBOdWxsXSIseD0iW29iamVjdCBVbmRlZmluZWRdIixSPXY/di50b1N0cmluZ1RhZzp2b2lkIDA7ZnVuY3Rpb24gdyh0KXtyZXR1cm4gbnVsbD09dD92b2lkIDA9PT10P3g6TzpSJiZSIGluIE9iamVjdCh0KT9mdW5jdGlvbih0KXt2YXIgcj1qLmNhbGwodCxkKSxlPXRbZF07dHJ5e3RbZF09dm9pZCAwO3ZhciBuPSEwfWNhdGNoKHQpe312YXIgaT1TLmNhbGwodCk7cmV0dXJuIG4mJihyP3RbZF09ZTpkZWxldGUgdFtkXSksaX0odCk6ZnVuY3Rpb24odCl7cmV0dXJuIG0uY2FsbCh0KX0odCl9dmFyIE49IltvYmplY3QgU3ltYm9sXSI7ZnVuY3Rpb24gJCh0KXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIHR8fGZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10JiYib2JqZWN0Ij09dHlwZW9mIHR9KHQpJiZ3KHQpPT1OfXZhciBBPU5hTixrPS9eWy0rXTB4WzAtOWEtZl0rJC9pLEY9L14wYlswMV0rJC9pLEk9L14wb1swLTddKyQvaSxxPXBhcnNlSW50O2Z1bmN0aW9uIEUodCl7aWYoIm51bWJlciI9PXR5cGVvZiB0KXJldHVybiB0O2lmKCQodCkpcmV0dXJuIEE7aWYocCh0KSl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIHQudmFsdWVPZj90LnZhbHVlT2YoKTp0O3Q9cChyKT9yKyIiOnJ9aWYoInN0cmluZyIhPXR5cGVvZiB0KXJldHVybiAwPT09dD90Oit0O3Q9cyh0KTt2YXIgZT1GLnRlc3QodCk7cmV0dXJuIGV8fEkudGVzdCh0KT9xKHQuc2xpY2UoMiksZT8yOjgpOmsudGVzdCh0KT9BOit0fXZhciBMPTEvMCxNPTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MjtmdW5jdGlvbiBQKHQpe3JldHVybiB0Pyh0PUUodCkpPT09THx8dD09PS1MPyh0PDA/LTE6MSkqTTp0PT10P3Q6MDowPT09dD90OjB9ZnVuY3Rpb24gVCh0KXt2YXIgcj1QKHQpLGU9ciUxO3JldHVybiByPT1yP2U/ci1lOnI6MH1mdW5jdGlvbiBVKHQpe2xldCByPSExO2lmKGYodCkpcj0haXNOYU4oTnVtYmVyKHQpKTtlbHNlIGlmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7aWYodSh0KSlyZXR1cm4hMTtyPSEwfXJldHVybiByfWZ1bmN0aW9uIEQodCl7aWYoIVUodCkpcmV0dXJuIDA7cmV0dXJuIFAodCl9ZnVuY3Rpb24gVyh0KXtyZXR1cm4hIVUodCkmJih0PUQodCksIm51bWJlciI9PXR5cGVvZihyPXQpJiZyPT1UKHIpKTt2YXIgcn12YXIgXz1BcnJheS5pc0FycmF5LHo9MS8wLEI9dj92LnByb3RvdHlwZTp2b2lkIDAsQz1CP0IudG9TdHJpbmc6dm9pZCAwO2Z1bmN0aW9uIEcodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiB0O2lmKF8odCkpcmV0dXJuIGZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLGk9QXJyYXkobik7KytlPG47KWlbZV09cih0W2VdLGUsdCk7cmV0dXJuIGl9KHQsRykrIiI7aWYoJCh0KSlyZXR1cm4gQz9DLmNhbGwodCk6IiI7dmFyIHI9dCsiIjtyZXR1cm4iMCI9PXImJjEvdD09LXo/Ii0wIjpyfWZ1bmN0aW9uIEgodCl7cmV0dXJuIG51bGw9PXQ/IiI6Ryh0KX12YXIgSj1oLmlzRmluaXRlLEs9TWF0aC5taW47dmFyIFEsVj0oUT1NYXRoWyJyb3VuZCJdLGZ1bmN0aW9uKHQscil7aWYodD1FKHQpLChyPW51bGw9PXI/MDpLKFQociksMjkyKSkmJkoodCkpe3ZhciBlPShIKHQpKyJlIikuc3BsaXQoImUiKTtyZXR1cm4rKChlPShIKFEoZVswXSsiZSIrKCtlWzFdK3IpKSkrImUiKS5zcGxpdCgiZSIpKVswXSsiZSIrKCtlWzFdLXIpKX1yZXR1cm4gUSh0KX0pO2Z1bmN0aW9uIFgodCl7aWYoIVUodCkpcmV0dXJuIDA7dD1EKHQpO2xldCByPVYodCk7cmV0dXJuIjAiPT09U3RyaW5nKHIpPzA6cn1mdW5jdGlvbiBZKHQpe2lmKCFXKHQpKXJldHVybiExO3JldHVybiBYKHQpPj0wfWZ1bmN0aW9uIFoodCxyKXtpZighZih0KSlyZXR1cm4iIjtpZighWShyKSlyZXR1cm4iIjtpZigwPT09KHI9WChyKSkpcmV0dXJuIiI7bGV0IGU9dC5sZW5ndGgtcjtyZXR1cm4gZTwwJiYoZT0wKSx0LnN1YnN0cmluZyhlLGUrcil9ZnVuY3Rpb24gdHQodCxyKXtyZXR1cm4gZih0KSYmWShyKT8wPT09KHI9WChyKSk/dDpmdW5jdGlvbih0LHIpe3JldHVybiBmKHQpJiZZKHIpPzA9PT0ocj1YKHIpKT8iIjp0LnN1YnN0cmluZygwLHIpOiIifSh0LHQubGVuZ3RoLXIpOiIifWZ1bmN0aW9uIHJ0KHQpe2lmKCFmKHQpKXJldHVybntwYXRoOiIiLGlzUm9vdDohMX07Zm9yKDt0LmluZGV4T2YoIlxcXFwiKT49MDspdD10LnJlcGxhY2UoIlxcXFwiLCJcXCIpO2Zvcig7dC5pbmRleE9mKCIvLyIpPj0wOyl0PXQucmVwbGFjZSgiLy8iLCIvIik7aWYoIjoiPT09Wih0LDEpKXJldHVybntwYXRoOmAke3R9XFxgLGlzUm9vdDohMH07aWYoIlxcIj09PVoodCwxKSl7bGV0IHI9dHQodCwxKTtyZXR1cm4iOiI9PT1aKHIsMSk/e3BhdGg6dCxpc1Jvb3Q6ITB9OntwYXRoOnIsaXNSb290OiExfX1pZigiLyI9PT1aKHQsMSkpe2xldCByPXR0KHQsMSk7cmV0dXJuIDA9PT1yLmxlbmd0aD97cGF0aDp0LGlzUm9vdDohMH06e3BhdGg6cixpc1Jvb3Q6ITF9fXJldHVybntwYXRoOnQsaXNSb290OiExfX1mdW5jdGlvbiBldCh0KXtpZighZih0KSlyZXR1cm4iIjtsZXQgcj1ydCh0KTtpZihyLmlzUm9vdClyZXR1cm4gci5wYXRoO2xldCBlPWZ1bmN0aW9uKHQpe2lmKCFmKHQpKXJldHVybiIiO2xldCByPXJ0KHQpO2lmKHIuaXNSb290KXJldHVybiByLnBhdGg7bGV0IGU9ci5wYXRoO3RyeXtlPWUuc3BsaXQoIlxcIikucG9wKCkuc3BsaXQoIi8iKS5wb3AoKX1jYXRjaCh0KXt9cmV0dXJuIGV9KHQ9ci5wYXRoKTtpZighZihlKSlyZXR1cm4gdDtsZXQgbj1ydCh0PXR0KHQsZS5sZW5ndGgpKTtyZXR1cm4gbi5pc1Jvb3Qsbi5wYXRofWZ1bmN0aW9uIG50KHQpe3JldHVybiEhci5leGlzdHNTeW5jKHQpJiYoIXIubHN0YXRTeW5jKHQpLmlzRmlsZSgpJiYhci5sc3RhdFN5bmModCkuaXNTeW1ib2xpY0xpbmsoKSl9ZnVuY3Rpb24gaXQodCl7cmV0dXJuISFyLmV4aXN0c1N5bmModCkmJighci5sc3RhdFN5bmModCkuaXNEaXJlY3RvcnkoKSYmIXIubHN0YXRTeW5jKHQpLmlzU3ltYm9saWNMaW5rKCkpfWZ1bmN0aW9uIG90KHQpe2lmKCFyLmV4aXN0c1N5bmModCkpcmV0dXJue3N1Y2Nlc3M6ImZpbGUgZG9lcyBub3QgZXhpc3Q6ICIrdH07aWYoIWl0KHQpKXJldHVybntlcnJvcjoiaW5wdXQgcGF0aCBpcyBub3QgYSBmaWxlOiAiK3R9O3RyeXtyLnVubGlua1N5bmModCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fXJldHVybntzdWNjZXNzOiJkb25lOiAiK3R9fWFzeW5jIGZ1bmN0aW9uIHV0KHQsaSxvKXtsZXQgdT0iIjtpZighbihmPWkpfHwwPT09Zi5sZW5ndGh8fDE9PT1mLmxlbmd0aCYmYyhmWzBdKSl0aHJvdyBuZXcgRXJyb3IoImZwc0luIGluIG5vdCBhbiBlZmZlY3RpdmUgYXJyYXkiKTt2YXIgZjtsZXQgbD1ldChvKTtudChsKXx8ZnVuY3Rpb24odCl7aWYobnQodCkpcmV0dXJue3N1Y2Nlc3M6ImlucHV0IGZvbGRlciBpcyBhbHJlYWR5IGV4aXN0czogIit0fTtpZihyLmV4aXN0c1N5bmModCkpcmV0dXJue2Vycm9yOiJpbnB1dCBwYXRoIGFscmVhZHkgZXhpc3RzOiAiK3R9O3RyeXtyLm1rZGlyU3luYyh0LHtyZWN1cnNpdmU6ITB9KX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fShsKTtsZXQgYT1lKCk7dHJ5e2xldCBuPXIuY3JlYXRlV3JpdGVTdHJlYW0obyk7Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0Kyspe2xldCBvPWlbdF07aWYoIWl0KG8pKXRocm93IG5ldyBFcnJvcihgZnBJblske299XSBpcyBub3QgYSBmaWxlYCk7bGV0IGM9KCk9PntsZXQgdD1lKCksaT1yLmNyZWF0ZVJlYWRTdHJlYW0obyk7cmV0dXJuIGkub24oImVycm9yIiwocj0+e3U9ci5tZXNzYWdlLHQucmVqZWN0KHIpfSkpLGkub24oImVuZCIsKCgpPT57b3QobyksdC5yZXNvbHZlKCl9KSksaS5waXBlKG4se2VuZDohMX0pLHR9O2F3YWl0IGMoKX1uLmVuZCgpLG4ub24oImVycm9yIiwodD0+e3U9dC5tZXNzYWdlLGEucmVqZWN0KHUpfSkpLG4ub24oImZpbmlzaCIsKCgpPT57bGV0IHI9e2ZpbGVuYW1lOnQscGF0aDpvfTthLnJlc29sdmUocil9KSl9Y2F0Y2godCl7dT10Lm1lc3NhZ2UsYS5yZWplY3QodSl9cmV0dXJuIGF9bGV0IG1lcmdlRmlsZXM9YXN5bmMocixlLG4saSk9PntsZXQgbz1bXTtmb3IobGV0IGk9MDtpPG47aSsrKXtsZXQgbj10LmpvaW4ocixgJHtlfV8ke2l9YCk7by5wdXNoKG4pfWxldCB1PXQuam9pbihyLGUpO3JldHVybiBhd2FpdCB1dChpLG8sdSl9OwoKCmxldCBpbnN0YW5jZSA9IG51bGwKZnVuY3Rpb24gaW5pdChpbnB1dCl7CgogICAgLy9pbml0CiAgICBsZXQgcgogICAgCiAgICAgICAgciA9IHsKICAgICAgICAgICAgbWFpbjogbWVyZ2VGaWxlcwogICAgICAgIH0KICAgICAgICAKCiAgICAvL29uCiAgICAKCiAgICAvL3NhdmUKICAgIGluc3RhbmNlID0gcgoKfQoKZnVuY3Rpb24gc2VuZE1lc3NhZ2UoZGF0YSkgewogICAgCiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShkYXRhKQogICAgICAgIAp9Cgphc3luYyBmdW5jdGlvbiBydW4oZGF0YSkgewogICAgLy8gY29uc29sZS5sb2coJ2lubmVyIHdvcmtlciBydW4nLGRhdGEpCgogICAgLy9tb2RlCiAgICBsZXQgbW9kZSA9IGRhdGEubW9kZQoKICAgIC8vY2hlY2sKICAgIGlmKG1vZGUgIT09ICdpbml0JyAmJiBtb2RlICE9PSAnY2FsbCcpewogICAgICAgIHJldHVybgogICAgfQoKICAgIC8vaW5pdAogICAgaWYobW9kZSA9PT0gJ2luaXQnKXsKICAgICAgICAKICAgICAgICB0cnl7CgogICAgICAgICAgICAvL3R5cGUKICAgICAgICAgICAgbGV0IHR5cGUgPSBkYXRhLnR5cGUKCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAogICAgCiAgICAgICAgICAgIC8vaW5zdGFuY2UKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgICAgICAgICBpbml0KC4uLmlucHV0KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PT0gJ29iamVjdCcpewogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBtZXJnZUZpbGVzCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgCiAgICAgICAgICAgIC8vc2VuZE1lc3NhZ2UKICAgICAgICAgICAgbGV0IHJlcyA9IHsKICAgICAgICAgICAgICAgIG1vZGU6ICdlbWl0JywKICAgICAgICAgICAgICAgIGV2TmFtZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgIG1zZzogZXJyLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbmRNZXNzYWdlKHJlcykKCiAgICAgICAgfQogICAgICAgICAgICAKICAgIH0KCiAgICAvL2NoZWNrCiAgICBpZihtb2RlID09PSAnY2FsbCcpewogICAgICAgIGxldCBzdGF0ZSA9ICcnCiAgICAgICAgbGV0IG1zZyA9IG51bGwKCiAgICAgICAgdHJ5ewoKICAgICAgICAgICAgLy9mdW4KICAgICAgICAgICAgbGV0IGZ1biA9IGluc3RhbmNlW2RhdGEuZnVuXQoKICAgICAgICAgICAgLy9pbnB1dAogICAgICAgICAgICBsZXQgaW5wdXQgPSBkYXRhLmlucHV0CgogICAgICAgICAgICAvL2V4ZWMKICAgICAgICAgICAgYXdhaXQgZnVuKC4uLmlucHV0KQogICAgICAgICAgICAgICAgLnRoZW4oKHN1YykgPT4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlPSdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgIG1zZz1zdWMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlPSdlcnJvcicKICAgICAgICAgICAgICAgICAgICBtc2c9ZXJyCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICB9CiAgICAgICAgY2F0Y2goZXJyKXsKICAgICAgICAgICAgc3RhdGUgPSAnZXJyb3InCiAgICAgICAgICAgIG1zZyA9IGVycgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgbGV0IHJlcyA9IHsKICAgICAgICAgICAgbW9kZTogJ3JldHVybicsCiAgICAgICAgICAgIGlkOiBkYXRhLmlkLAogICAgICAgICAgICBmdW46IGRhdGEuZnVuLAogICAgICAgICAgICBzdGF0ZSwKICAgICAgICAgICAgbXNnLAogICAgICAgIH0KICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgfQoKfQoKZnVuY3Rpb24gcmVjdk1lc3NhZ2UoZGF0YSkgewogICAgLy8gY29uc29sZS5sb2coJ2lubmVyIHdvcmtlciByZWN2OicsIGRhdGEpCgogICAgLy9kYXRhUmVjdgogICAgbGV0IGRhdGFSZWN2ID0gZGF0YQoKICAgIC8vcnVuCiAgICBydW4oZGF0YVJlY3YpCgp9CgoKICAgICAgICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJlY3ZNZXNzYWdlKGUuZGF0YSkKICAgICAgICB9CiAgICAgICAgCgp0cnl7CiAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuaGFuZGxlZFJlamVjdGlvbicsIGVycikKICAgIH0pCiAgICBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmNhdWdodEV4Y2VwdGlvbk1vbml0b3InLCBlcnIpCiAgICB9KQp9CmNhdGNoKGVycil7fQoK");function t(){let t=new h,n=function(e){try{let t=new Blob([e]),n=window.URL||window.webkitURL;return new Worker(n.createObjectURL(t))}catch(e){o(e)}}(e);if(!n)return o("invalid worker"),null;function r(){let e=function(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=n.length;for(let o=0;o<e;o++)t[o]=n[0|Math.random()*r];return t.join("")}(),o={mode:"call",id:r,fun:"main",input:[...arguments]};return n.postMessage(o),t.once(r,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function o(e){t.emit("error",e)}return n.onmessage=function(e){!function(e){let n=e,r=n.mode;"emit"!==r&&"return"!==r||("emit"===r&&t.emit(n.evName,n.msg),"return"===r&&t.emit(n.id,n))}(e.data)},n.onerror=o,n.onmessageerror=function(e){o(e.data)},function(){let e={mode:"init",type:"function",input:[...arguments]};n.postMessage(e)}([...arguments]),t.main=r,t.main=r,t.terminate=function(){n?(n.terminate(),n=void 0):o("worker has been terminated")},t}m=async function(){let e=[...arguments],n=t();return await n.main(...e).finally((()=>{n.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return m}()}({get exports(){return r},set exports(e){r=e}});var o=r;let i;return i="undefined"!=typeof window&&void 0!==window.document?o:n,i}(c)}({get exports(){return Gn},set exports(e){Gn=e}});var Wn=Gn;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=ye(i,"port");var l;Fe(l=c)&&Me(l)>0||(c=8080);let a=ye(i,"useInert");nt(a)||(a=!0);let u=ye(i,"pathStaticFiles");We(u)||(u="dist");let s=ye(i,"apiName");We(s)||(s="api");let d=ye(i,"pathUploadTemp");We(d)||(d="./uploadTemp"),Xn(d)||function(e){if(Xn(e))return{success:"input folder is already exists: "+e};if(t.existsSync(e))return{error:"input path already exists: "+e};try{t.mkdirSync(e,{recursive:!0})}catch(e){return{error:e}}}(d);let g=ye(i,"tokenType");We(g)||(g="Bearer");let I=ye(i,"verifyConn");(function(e){let t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t})(I)||(I=()=>!0);let p=ye(i,"corsOrigins",[]);et(p)||(p=["*"]);let C=ye(i,"delayForBasic","");Ee(C)||(C=0),C=Me(C);let f=ye(i,"delayForSlice","");Ee(f)||(f=100),f=Me(f);let y=null;y=ye(i,"serverHapi")?i.serverHapi:r.server({port:c,routes:{timeout:{server:!1,socket:!1},cors:{origin:p,credentials:!1}}});let h=new Ze,m=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];setTimeout((()=>{h.emit(e,...n)}),1)};async function b(e){let t=be(),n=be();return n.then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),m("download",e,n),t}function A(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new n.Readable;o._read=()=>{},o.push(t),o.push(null);let i=ye(r,"returnType",""),c=ye(r,"returnMsg",""),l=e.response(o).header("Cache-Control","no-cache, no-store, must-revalidate").header("Content-Type","application/octet-stream").header("Content-Length",o.readableLength);return We(i)&&l.header("Return-Type",i),We(c)&&l.header("Return-Msg",c),l}function v(e,t){return We(t)||(console.log("msg",t),console.log("msg is not an effective string, set msg=''"),t=""),A(e,yn({error:t}),{returnType:"error",returnMsg:t})}let Z={path:`/${s}`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,output:"stream",parse:!1},timeout:{server:!1,socket:!1}},handler:async function(e,t){let r=ye(e,"headers");r=Ke(r)?r:"";let o=ye(e,"query");o=Ke(o)?o:"";let i=ye(r,"authorization","");i=We(i)?i:"";{let e=I({apiType:"main",authorization:i,headers:r,query:o});if(rt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiMain",headers:r,query:o});let c=await(()=>{let t=be(),r=[],o=new n.Writable({write(e,t,n){r.push(e),setTimeout((()=>{n()}),C)}});return e.payload.pipe(o),e.payload.on("end",(()=>{let e=Buffer.concat(r);r=[],t.resolve(e)})),e.payload.on("error",(e=>{m("error","receive payload err"),t.reject(e.message)})),t})(),l=vn(new Uint8Array(c)),a={},u="",s="";return await async function(e){let t=be(),n=be();n.then((n=>{e.output=n,delete e.input,t.resolve(e)})).catch((e=>{t.reject(e)}));{let t=ye(e,"func",""),r=ye(e,"input",null);m("execute",t,r,n)}return t}(l).then((e=>{a.success=e,u="success",s="need to parse"})).catch((e=>{a.error=e,u="error",s="need to parse"})),A(t,yn(a),{returnType:u,returnMsg:s})}},X={path:`/${s}ulckh`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(t,n){let r=ye(t,"headers");r=Ke(r)?r:"";let o=ye(t,"query");o=Ke(o)?o:"";let i=ye(r,"authorization","");i=We(i)?i:"";{let e=I({apiType:"upload-check-slice-hash",authorization:i,headers:r,query:o});if(rt(e)&&(e=await e),!0!==e)return v(n,"permission denied")}m("handler",{api:"apiUploadCheckHash",headers:r,query:o});let c=ye(t,"payload.filename",""),l=ye(t,"payload.fileHash","");if(!We(c))return v(n,"invalid filename in payload");if(!We(l))return v(n,"invalid fileHash in payload");let a=e.join(d,c);if(!Zn(a)){return A(n,yn({success:{existed:!1,msg:"not exist"}}),{returnType:"success",returnMsg:"need to parse"})}if(l!==await Kn(a,{useSync:!1,type:"sha256"})){return A(n,yn({success:{existed:!1,msg:"not equal"}}),{returnType:"success",returnMsg:"need to parse"})}return A(n,yn({success:{existed:!0,msg:"equal",path:a}}),{returnType:"success",returnMsg:"need to parse"})}},K={path:`/${s}slc`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,output:"stream",parse:!1},timeout:{server:!1,socket:!1}},handler:async function(n,r){let o=ye(n,"headers");o=Ke(o)?o:"";let i=ye(n,"query");i=Ke(i)?i:"";let c=ye(o,"authorization","");c=We(c)?c:"";{let e=I({apiType:"upload-slice",authorization:c,headers:o,query:i});if(rt(e)&&(e=await e),!0!==e)return v(r,"permission denied")}m("handler",{api:"apiUploadSlice",headers:o,query:i});let l=ye(o,"chunk-index",""),a=ye(o,"chunk-total",""),u=ye(o,"package-id","");if(!Ee(l))return console.log("invalid chunkIndex in headers"),r.response({error:"invalid chunkIndex in headers"}).code(400);if(l=Me(l),!Ee(a))return console.log("invalid chunkTotal in headers"),r.response({error:"invalid chunkTotal in headers"}).code(400);if(a=Me(a),!We(u))return console.log("invalid packageId in headers"),r.response({error:"invalid packageId in headers"}).code(400);let s=e.join(d,`${u}_${l}`),g=t.createWriteStream(s),p={},C="",y="";return await(()=>{let e=be();return n.payload.pipe(g),n.payload.on("end",(()=>{setTimeout((()=>{e.resolve(`chunk[${l}/${a}] of packageId[${u}] done`)}),f)})),n.payload.on("error",(t=>{m("error",`receive chunk[${l}/${a}] of packageId[${u}] err`),e.reject(`apiUploadSlice receive error: ${t.message}`)})),e})().then((e=>{p.success=e,C="success",y="need to parse"})).catch((e=>{p.error=e,C="error",y="need to parse",m("error",e)})),A(r,yn(p),{returnType:C,returnMsg:y})}},G={path:`/${s}slcm`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=ye(e,"headers");n=Ke(n)?n:"";let r=ye(e,"query");r=Ke(r)?r:"";let o=ye(n,"authorization","");o=We(o)?o:"";{let e=I({apiType:"upload-slice-merge",authorization:o,headers:n,query:r});if(rt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiUploadSliceMerge",headers:n,query:r});let i=ye(e,"payload.filename",""),c=ye(e,"payload.chunk-total",""),l=ye(e,"payload.package-id","");if(!We(i))return console.log("invalid filename in payload"),t.response({error:"invalid filename in payload"}).code(400);if(!Ee(c))return console.log("invalid chunkTotal in payload"),t.response({error:"invalid chunkTotal in payload"}).code(400);if(c=Me(c),!We(l))return console.log("invalid packageId in payload"),t.response({error:"invalid packageId in payload"}).code(400);let a={},u="",s="";return await(async()=>{let e=await Wn(d,l,c,i);return await async function(e){let t=be(),n=be();return n.then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),m("upload",e,n),t}(e)})().then((e=>{a.success=e,u="success",s="need to parse"})).catch((e=>{a.error=e,u="error",s="need to parse",m("error",`${e.message}`)})),A(t,yn(a),{returnType:u,returnMsg:s})}},W={path:`/${s}dwgfn`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=ye(e,"headers");n=Ke(n)?n:"";let r=ye(e,"query");r=Ke(r)?r:"";let o=ye(n,"authorization","");o=We(o)?o:"";{let e=I({apiType:"download-get-filename",authorization:o,headers:n,query:r});if(rt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiDownloadGetFilename",headers:n,query:r});let i=ye(e,"payload.fileId","");if(!We(i))return v(t,"invalid fileId in payload");let c={fileId:i},l={},a="",u="";await b(c).then((e=>{l.success=e,a="success",u="need to parse"})).catch((e=>{l.error=e,a="error",u="need to parse"}));let s=ye(l,"success"),d=ye(s,"streamRead");try{d.destroy()}catch(e){}let g=ye(s,"filename");return We(g)?(l={success:{filename:g}},A(t,yn(l),{returnType:a,returnMsg:u})):v(t,"invalid filename")}},H={path:`/${s}dwgf`,method:"GET",options:{timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=ye(e,"headers");n=Ke(n)?n:"";let r=ye(e,"query");r=Ke(r)?r:"";let o=ye(r,"token","");o=We(o)?o:"";let i="";We(o)&&(i=`${g} ${o}`);{let e=I({apiType:"download-get-file",authorization:i,headers:n,query:r});if(rt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiDownloadGetFilename",headers:n,query:r});let c=ye(r,"fileId","");if(c=We(c)?c:"",!We(c))return v(t,"invalid fileId in query");let l={fileId:c},a={};if(await b(l).then((e=>{a.success=e})).catch((e=>{a.error=e})),pt(a,"error"))return v(t,"can not get file from fileId");let u=ye(a,"success"),s=ye(u,"streamRead"),d=ye(u,"fileSize");if(!me(d)){try{s.destroy()}catch(e){}return v(t,"invalid fileSize")}let p=ye(u,"fileType");if(!We(p)){try{s.destroy()}catch(e){}return v(t,"invalid fileType")}return p=ot(p),t.response(s).type(p).header("Content-Length",d)}},V={path:`/${s}dw`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=ye(e,"headers");n=Ke(n)?n:"";let r=ye(e,"query");r=Ke(r)?r:"";let o=ye(n,"authorization","");o=We(o)?o:"";{let e=I({apiType:"download",authorization:o,headers:n,query:r});if(rt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiDownload",headers:n,query:r});let i=ye(e,"payload.fileId","");if(!We(i))return v(t,"invalid fileId in payload");let c={fileId:i},l={};if(await b(c).then((e=>{l.success=e})).catch((e=>{l.error=e})),pt(l,"error"))return v(t,"can not get file from fileId");let a=ye(l,"success"),u=ye(a,"streamRead"),s=ye(a,"filename");if(!We(s)){try{u.destroy()}catch(e){}return v(t,"invalid filename")}s=It(s);let d=ye(a,"fileSize");if(!me(d)){try{u.destroy()}catch(e){}return v(t,"invalid fileSize")}let g=ye(a,"fileType");if(!We(g)){try{u.destroy()}catch(e){}return v(t,"invalid fileType")}return g=ot(g),t.response(u).type(g).header("Content-Disposition",`attachment; filename="${s}"`).header("Content-Length",d)}};return ye(i,"serverHapi")?y.route([Z,X,K,G,W,H,V]):async function(){a&&await y.register(o);let e=[];if(a){let t={method:"GET",path:"/{file*}",handler:{directory:{path:`${u}/`}}};e=[...e,t]}e=[...e,Z,X,K,G,W,H,V],y.route(e),await y.start(),console.log(`Server running at: ${y.info.uri}`)}(),h.stop=()=>{y.stop()},h}}));
//# sourceMappingURL=w-converhp-server.umd.js.map
